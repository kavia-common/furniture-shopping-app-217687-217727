pluginManagement {
  repositories {
    // Deterministic plugin resolution sources
    google()
    mavenCentral()
    gradlePluginPortal()
    maven { url 'https://storage.googleapis.com/download.flutter.io' }
  }
  // Explicit plugin versions so Gradle can resolve without legacy buildscript
  plugins {
    id('com.android.application') version '8.6.1'
    id('org.jetbrains.kotlin.android') version '2.0.21'
    // Resolve Flutter Gradle plugin from the included Flutter tools build
    id('dev.flutter.flutter-gradle-plugin')
  }
}

def props = new Properties()
def lp = file('local.properties')
if (lp.exists()) lp.withInputStream { props.load(it) }
def flutterSdk = props.getProperty('flutter.sdk', System.getenv('FLUTTER_HOME'))
if (flutterSdk != null) includeBuild("${flutterSdk}/packages/flutter_tools/gradle")

dependencyResolutionManagement {
  // Prefer settings repositories to ensure CI plugin/dependency resolution consistency
  repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
  repositories {
    google()
    mavenCentral()
    maven { url 'https://storage.googleapis.com/download.flutter.io' }
  }
}

include(":app")
