plugins {
  // Android application plugin
  id("com.android.application")
  // Kotlin Android plugin
  id("org.jetbrains.kotlin.android")
  // Flutter Gradle plugin provides flutter-embedding artifacts and tasks
  id("dev.flutter.flutter-gradle-plugin")
}

// PUBLIC_INTERFACE
android {
  namespace "com.example.mobileapp"
  compileSdk 34
  defaultConfig {
    applicationId "com.example.mobileapp"
    minSdk 21
    targetSdk 34
    versionCode 1
    versionName "1.0"
    multiDexEnabled true
  }
  compileOptions {
    // Target Java 17 per request
    sourceCompatibility JavaVersion.VERSION_17
    targetCompatibility JavaVersion.VERSION_17
  }
  kotlinOptions {
    // Align Kotlin jvmTarget with Java toolchain
    jvmTarget = "17"
  }
  buildTypes {
    release {
      minifyEnabled false
      shrinkResources false
    }
    debug {
      minifyEnabled false
      shrinkResources false
    }
  }
}

dependencies {
  // AndroidX and Material dependencies with explicit versions
  implementation "androidx.multidex:multidex:2.0.1"
  implementation "androidx.core:core-ktx:1.13.1"
  implementation "androidx.appcompat:appcompat:1.7.0"
  implementation "com.google.android.material:material:1.12.0"

  // Temporary fallback in case Flutter Gradle plugin embedding resolution fails in CI.
  // Normally provided by dev.flutter.flutter-gradle-plugin; safe to remove once plugin resolves.
  debugImplementation("io.flutter:flutter_embedding_debug:1.0.0")
  releaseImplementation("io.flutter:flutter_embedding_release:1.0.0")
}
