pluginManagement {
  repositories {
    // Required repositories for Android/Flutter
    google()
    mavenCentral()
    gradlePluginPortal()
    maven { url 'https://storage.googleapis.com/download.flutter.io' }
  }
}

def props = new Properties()
def lp = file('local.properties')
if (lp.exists()) {
  lp.withInputStream { props.load(it) }
}
def flutterSdk = props.getProperty('flutter.sdk', System.getenv('FLUTTER_HOME'))
if (flutterSdk != null) {
  // Include Flutter tools build so dev.flutter.flutter-gradle-plugin is available
  includeBuild("${flutterSdk}/packages/flutter_tools/gradle")
}

dependencyResolutionManagement {
  // Prefer project repositories so Flutter plugin can add its internal repository
  repositoriesMode.set(RepositoriesMode.PREFER_PROJECT)
  repositories {
    google()
    mavenCentral()
    // Keep Flutter artifacts repository available
    maven { url 'https://storage.googleapis.com/download.flutter.io' }
  }
}

include(":app")
